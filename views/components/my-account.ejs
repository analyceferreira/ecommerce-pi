
<main class="container margin-header-over">
    <section class="user-page">
        <div class="user-page-options">
            <a href="#" class="user-page-option account option-select">
                <div class="image">
                    <img class="image-icon" src="/img/icons/user-icon-b.png" alt="perfi"> 
                </div>
                <span>Minha Conta</span>
            </a>
            <a href="#" class="user-page-option orders">
                <div class="image">
                    <img class="image-icon" src="/img/icons/caixa-icon-b.png" alt="caixa de Pedidos"> 
                </div>
                <span>Meus Pedidos</span>
            </a>
            <a href="#" class="user-page-option infos">
                <div class="image">
                    <img class="image-icon" src="/img/icons/paciente-icon-b.png" alt="Dados pessoais"> 
                </div>
                <span>Meus Dados</span>
            </a>
        </div>

        <div class="user-page-data">
            <h1 class="user-page-data-title">Meus Dados</h1> 
            <div class="user-page-data-blocks">
                <div class="user-page-data-infos acess-infos">
                    <h2 class="title">Informações de Acesso</h2>
                    <div>
                        <span class="info"> <%= user.name %> </span>
                        <span class="info"> <%= user.email %> </span>
                    </div>
                    <button class="button-submit">ALTERAR</button>
                </div>
                <div class="user-page-data-infos adress-infos">
                    <h2 class="title">Endereço Principal</h2>
                    <div>
                        <span class="info">Apelido: <%= user.addresses[0].title %></span>
                        <span class="info"><%= user.addresses[0].street %> - nº <%= user.addresses[0].number %></span>
                        <span class="info"><%= user.addresses[0].city %>, <%= user.addresses[0].state %> - <%= user.addresses[0].zip_code %></span>
                        <span class="info">Tel: (66) 98411-5450</span>
                    </div>
                    <button class="button-submit">ALTERAR</button>
                </div>
            </div>
            <div class="orders-list">
                <h3>PEDIDOS</h1>
                <table class="orders-list-table"  BORDER RULES=rows>
                    <tr class="table-titles" style="height:35px">
                        <th class="order" colspan="2">Pedido</th>
                        <th>Data Pedido</th>
                        <th style="width:20%">Pagamento</th>
                        <th style="width:15%">Status</th>
                    </tr>

                    <% for(order of orders) {
                        let quantProducts = 0
                        let products = []

                        for(product of order.products) {
                            products.push(dataProducts.find( productOrder => productOrder.id == product))
                        } 
                        quantProducts = products.length 
                        console.log('*******************************************') 
                        console.log(order.id)
                        console.log(products) %>

                        <tr class="row" style="height:100px">
                            <td class="product-image"><img class="product-image" src="<%= products[0].images[0] %>" alt="imagem do produto teste" class="image-product-order"></td>
                            <td class="order-title-info"> <%= products[0].title %> 
                                <% if(quantProducts - 1 < 2 && quantProducts - 1 != 0) { %>
                                e mais <%= quantProducts - 1  %> item
                                <% } 
                                else if(quantProducts - 1 >= 2) { %>
                                    e mais <%= quantProducts - 1  %> itens
                                <% } %>
                            </td>
                            <td> <%= order.date_order %> </td>
                            <td class="payment-row"> <%= order.method_payment %> </td>
                            <td> <%= order.status %> </td>
                            <td><button class="button-submit">Ver Pedido</button></td>
                        </tr>

                    <% } %>



                </table>
            </div>



        </div>
    </section>
</main>
